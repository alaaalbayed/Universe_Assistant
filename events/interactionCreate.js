const { createLogger, transports, format } = require('winston');
const { ActionRowBuilder, ButtonBuilder, ButtonStyle } = require('discord.js');

const logger = createLogger({
    level: 'error',
    format: format.combine(
        format.timestamp(),
        format.errors({ stack: true }),
        format.splat(),
        format.json()
    ),
    transports: [
        new transports.File({ filename: 'error.log', level: 'error' }),
    ],
});

const client = require("../index.js");

const imageUrls = [
    "https://cdn.discordapp.com/attachments/1010162960120946718/1160260597460508774/1.png?ex=653403e3&is=65218ee3&hm=10eaebbb1d73d535f52a41e18f9900184828864490b60f52fb7671ef97b1b60f&",
    "https://cdn.discordapp.com/attachments/1010162960120946718/1160260597858975774/2.png?ex=653403e3&is=65218ee3&hm=82a89e87bee7a1f10a8e5274e1b3c84212861bbe1d80be19d4bbf625587f2854&",
    "https://cdn.discordapp.com/attachments/1010162960120946718/1160260598219673731/3.png?ex=653403e3&is=65218ee3&hm=d4f2f07f966cad676411099f0232e6aa5d164acbdb2ad2821ff6d91e70329fa5&",
    "https://cdn.discordapp.com/attachments/1010162960120946718/1160260598601359530/4.png?ex=653403e3&is=65218ee3&hm=2b926d229f48c9bbf51c9e07d1027e66b8e97744b0ba9b5bea86ad1c1ff26720&",
    "https://cdn.discordapp.com/attachments/1010162960120946718/1160260598945300530/5.png?ex=653403e3&is=65218ee3&hm=3e1f3ae33c228ce7b5a4ebaeb82a54216095fa6e3781c309cc54f752a8e9444b&",
    "https://cdn.discordapp.com/attachments/1010162960120946718/1160260599276646501/6.png?ex=653403e3&is=65218ee3&hm=a70e5ed9dde71ebc37f8bd22346eaf03a9c3ee1a4470e75fdeb11006911ac719&",
    "https://cdn.discordapp.com/attachments/1010162960120946718/1160260599633166437/7.png?ex=653403e3&is=65218ee3&hm=c7a3b41c14bd14f7e9778aeb686f5d2e1eca8ab20511fb6bbb2295d626eb7ea1&",
    "https://cdn.discordapp.com/attachments/1010162960120946718/1160260599956115617/8.png?ex=653403e3&is=65218ee3&hm=25633dbed8ce4338ea64e2339f44a6a3f16bf3309361af77fbcad524f5ce92d6&",
    "https://cdn.discordapp.com/attachments/1010162960120946718/1160260600388132994/9.png?ex=653403e3&is=65218ee3&hm=526546a6994c8b1dda5a168a405712bc25ac6975435d79fcd7ebd5b12832b809&",
];

const row = new ActionRowBuilder().addComponents(
    new ButtonBuilder()
        .setCustomId("prev")
        .setLabel("<")
        .setStyle(ButtonStyle.Primary),
    new ButtonBuilder()
        .setCustomId("first")
        .setLabel("First")
        .setStyle(ButtonStyle.Primary),
    new ButtonBuilder()
        .setCustomId("next")
        .setLabel(">")
        .setStyle(ButtonStyle.Primary)
);

client.on("interactionCreate", async (interaction) => {
    if (
        interaction.customId === "prev" ||
        interaction.customId === "first" ||
        interaction.customId === "next"
    ) {
        interaction.deferUpdate();

        if (interaction.customId === "prev") {
            if (currentImageIndex > 0) {
                currentImageIndex--;
            }
        } else if (interaction.customId === "first") {
            currentImageIndex = 0;
        } else if (interaction.customId === "next") {
            if (currentImageIndex < imageUrls.length - 1) {
                currentImageIndex++;
            }
        }

        const embed = {
            color: 0x0099ff,
            title: "ุทุฑููุฉ ุงูุฅุจูุงุบ ุนู ุงูุณุจ ู ุงูุดุชู ุฏุงุฎู ุงููุนุจุฉ",
            description: `    
             ูุฐู ูู ุงูุทุฑููุฉ ููุฅุจูุงุบ ุนู ุงููุฎุงูููู ููู ูุชู ุนูุงุจูู ุจุงูุนููุจุฉ ุงูููุงุณุจุฉ , ูุฑุฌู ุงูุนูู ุจุฃู ูุฐู ุงูุจูุงุบุงุช ุชุชู ุจุฏุงุฎู ุงููุนุจุฉ ููุท ู ููุณ ููุง ุนูุงูุฉ ุจูู ููุงุฆูุงู !!`,
            image: { url: imageUrls[currentImageIndex] },
        };

        await messageReference.edit({ embeds: [embed] })

    } else {
        if (!interaction.isButton()) return;

        if (interaction.customId === '8๏ธโฃ' || interaction.customId === 'report') {
            // Set the currentImageIndex to 0
            currentImageIndex = 0;

            // Create the initial embed
            const embed = {
                color: 0x0099ff,
                title: 'ุทุฑููุฉ ุงูุฅุจูุงุบ ุนู ุงูุณุจ ู ุงูุดุชู ุฏุงุฎู ุงููุนุจุฉ',
                description: `ูุฐู ูู ุงูุทุฑููุฉ ููุฅุจูุงุบ ุนู ุงููุฎุงูููู ููู ูุชู ุนูุงุจูู ุจุงูุนููุจุฉ ุงูููุงุณุจุฉ. ูุฑุฌู ุงูุนูู ุจุฃู ูุฐู ุงูุจูุงุบุงุช ุชุชู ุจุฏุงุฎู ุงููุนุจุฉ ููุท ู ููุณ ููุง ุนูุงูุฉ ุจูู ููุงุฆูุงู !!`,
                image: { url: imageUrls[currentImageIndex] },
            };

            const reply = await interaction.reply({ embeds: [embed], components: [row], ephemeral: true });
            messageReference = reply;

        }

        const responses = {
            "1๏ธโฃ": {
                description: `
      ูู ุณูุฑูุฑ ุฎุงุต ููุงุนุจูู ููุงุฌูุฉ ุงูุฃุจุทุงู ุงูุนุฑุจ ูุงููุฏู ูู ูุฐุง ุงูุณูุฑูุฑ ูู ุชูููุฑ ุจูุฆุฉ ุขููุฉ ุจุงููุณุจุฉ ูู ูุฅุฌุฑุงุก ุงููุญุงุฏุซุงุช ูุน ุจุงูู ุงูุฃุนุถุงุก ููุดุงุฑูุฉ ุขุฑุงุกู ุญูู ุงููุนุจุฉ ูุงูุชุจููุบ ุนู ุงููุดุงูู ุงูุชูููุฉ ูู ุงููุนุจุฉ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุญุตูู ุนูู ุงูุฏุนู ูู ูุฌุชูุน ุงููุนุจุฉ ูุฃู ุชููู ุฏููุงู ุนูู ุงุทูุงุน ุจุงุฎุฑ ุงูุชุญุฏูุซุงุช ุงูุชู ุชุฎุต ุงููุนุจุฉ ูุงููุฒูุฏ.
      
      ููุจุฐู ุฌูุฏูุง ูุฎูู ูุฌุชูุน ุฃูุถู ูููู ุนูู ุฃุณุงุณ ุฅุญุชุฑุงู ุงูุขุฎุฑููู ูุชูุฏูู ุงูุฃูุถู ููุฌููุน ูู ุงููุทู ุงูุนุฑุจู. ูู ุจุงูุญุฑุต ุนูู ุฅุชุจุงุน ุงูููุงููู ุงูููุตูุต ุนูููุง #โใปrules ููุงุณุชูุชุงุน ูุนูุง!
      
      ููู ุจูุฑุงุฌุนุฉ #๐คใปintroduction ููุญุตูู ุนูู ูุนูููุงุช ุฅุถุงููุฉ ูุจุงูู ุงููููุงุช ุงูููุฌูุฏุฉ ุจุงูุณูุฑูุฑ.`,
            },
            "2๏ธโฃ": {
                description: `
          ุฃููุงู ูุณููุงู ุจู ุนุฒูุฒู ุงููุงุนุจ ูู ุงูุณูุฑูุฑ ุงูุนุฑุจู ุงูุฑุณูู ุงูุฎุงุต ุจููุงุฌูุฉ ุงูุฃุจุทุงู - MLBB.
          
          ููุฑุตุฉ ุงููุดุงุฑูุฉ ูู ุงูุฃุญุฏุงุซ ูุงููุนุงููุงุช ูุงูุญุตูู ุนูู ุงูุฌูุงุฆุฒุ ูุฌุจ ุนููู ุฅููุงู ุงูุชุญูู ูู ุงููููุฉ. ููููู ุชุนุจุฆุฉ ุทูุจ ุงูุชุญูู ูู ุฎูุงู ุงูุฑุงุจุท ุงูุชุงูู:
          https://forms.gle/iB4bCPvFNru9UHU27
          
          ูุชู ุฅููุงู ุงูุทูุจ ุฎูุงู 48 ุณุงุนุฉุ ูุฐุง ูุฑุฌู ุงูุงูุชุธุงุฑ. ููููู ูุชุญ ุชุฐูุฑุฉ ูู ุญุงู ุชุฌุงูุฒ ุงูููุช ุงููุฐููุฑ ููุท!
          
          ูุฑุฌู ุงูุนูู ุฃูู ูุฌุจ ุชูุฏูู ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ ููู ูุชู ุฅููุงู ุงูุชุญูู ุจูุฌุงุญ. ูู ุญุงู ูุงูุช ูุฏูู ุฃู ูุดููุฉุ ูุฑุฌู ุงูุชูุฌู ู #๐ใปhelp-center.`,
                image:
                    "https://cdn.discordapp.com/attachments/1003614797738283011/1037406082122920056/d3d58a49e77f6396.png",
            },

            "3๏ธโฃ": {
                description: `
          ูุชู ุชูุฏูู ุงูุนุฏูุฏ ูู ุงูููุงูุขุช ุงููุฎุชููุฉ ูู ุณูุฑูุฑ ููุงุฌูุฉ ุงูุฃุจุทุงู ุงูุนุฑุจู. ููููู ูุฑุงุฌุนุชูุง ูู ุฎูุงู ูุณู ุงูููุงูุขุช ุงูููุฌูุฏ ูู #๐ใปrewards-system.
          
          ุชุฐูุฑ ุฃูู ูุชู ุชุญุฏูุซ ุงูููุงูุขุช ุจุงูุชุธุงูุ ุนุงุฏุฉู ูู ุดูุฑ ุชูุฑูุจูุง. ูุฐุงุ ุญุงูุธ ุนูู ูุชุงุจุนุชูุง ุจุงูุชุธุงู ูุถูุงู ุนุฏู ููุช ุฃู ููุงูุฃุฉ ูููุฉ. <:PepeRose:1000019064950890497>
      
                  `,
            },
            "4๏ธโฃ": {
                description: `
          ุฌูุงุฆุฒ ููุตุฉ ุงูุฏูุณููุฑุฏ ูุชู ุฅุฑุณุงููุง ุดูุฑููุง. ูุชู ุฅุฑุณุงู ูุฐู ุงูุฌูุงุฆุฒ ูู ุงูุฌูุนุฉ ุงูุฃุฎูุฑุฉ ูู ูู ุดูุฑ.
          
          ุชุฐูุฑ ุฏุงุฆููุง ูุชุงุจุนุฉ ุงูุฅุนูุงูุงุช ูุงูุชุญุฏูุซุงุช ุนูู ุงูุณูุฑูุฑ ููุชุฃูุฏ ูู ุนุฏู ุชูููุช ุฃู ุฌูุงุฆุฒ ูููุฉ ุฃู ุฃุญุฏุงุซ ุฎุงุตุฉ. ูุง ุชุชุฑุฏุฏ ูู ุงูุงุณุชูุณุงุฑ ุนู ุฃู ุชูุงุตูู ุฅุถุงููุฉ ูู #๐ใปhelp-center.
                  `,
            },
            "5๏ธโฃ": {
                description: `
          ุฅุฐุง ููุช ุตุงูุน ูุญุชูู ูุชุฑุบุจ ูู ุงูุญุตูู ุนูู ุงูุฏุนูุ ููููู ุงูุงูุถูุงู ุฅูู ุฃุญุฏ ุงูุจุฑุงูุฌ ุงูุฑุณููุฉ ุงูุชุงููุฉ:
      
          ูููุฒูุฏ ูู ุงูุชูุงุตูู ุญูู ูุฐู ุงูุจุฑุงูุฌ ูููููุฉ ุงูุชูุฏููุ ูุฑุฌู ุฒูุงุฑุฉ #๐ใปofficial-programs ูุชูุฏูู ุงูุทูุจ ุงูุฐู ููุงุณุจ ูุดุงุทู.
                  `,
            },
            "6๏ธโฃ": {
                description: `
          ูุชู ุงุฎุชูุงุฑ ุงูุณูุฑูุฑ ุงูุฐู ุณูุชู ุงุณุชุฎุฏุงูู ูู ุงูุจุทููุฉ ุงูุฃุณุจูุนูุฉ ุงุนุชูุงุฏูุง ุนูู ุนุฏุฏ ุงููุฑู ุงููุดุงุฑูุฉ. ูู ุงูุบุงูุจุ ูุชู ุงุฎุชูุงุฑ ุงูุณูุฑูุฑ ุงูุฐู ูุญุชูู ุนูู ุงููุณุจุฉ ุงูุฃูุจุฑ ูู ุงููุฑู ุงููุณุฌูุฉ ูููุดุงุฑูุฉ.
          
          ููุญุตูู ุนูู ูุฒูุฏ ูู ุงููุนูููุงุช ุญูู ุงูุจุทููุงุช ูููููุฉ ุงููุดุงุฑูุฉุ ููููู ุฒูุงุฑุฉ ูุณู ุงูุจุทููุงุช ุงูุฎุงุต ุจูุง ูู #๐ใปtournaments ููุชุงุจุนุฉ ุงูุชุญุฏูุซุงุช ุงูุฏูุฑูุฉ.
                  `,
            },
            "7๏ธโฃ": {
                description: `
          ุฌูุงุฆุฒ ุงูุณูุฑูุฑ ุชูุญุชุณุจ ูุชูููุญ ูู ููู ุฅุซููู ูุจู ุงูุฌูุนุฉ ุงูุฃุฎูุฑุฉ ูู ูู ุดูุฑ. ูุฌุจ ุฃู ุชููู ูุฏ ุชุญููุช ูู ุงููุฏู ุงูุฎุงุต ุจู ูุจู ูุฐุง ุงูููุนุฏ ูุถูุงู ุงูุญุตูู ุนูู ุฌูุงุฆุฒู.
          
          ุชุฃูุฏ ูู ุงูุงุทูุงุน ุนูู ุชุญุฏูุซุงุช ุงูุฌูุงุฆุฒ ูุงูููุงููู ูู #๐ใปrewards-system ููุชุฃูุฏ ูู ุฃูู ุนูู ุฏุฑุงูุฉ ุจูุชุทูุจุงุช ุงูุญุตูู ุนูู ุงูุฌูุงุฆุฒ ูุงูููุช ุงููุญุฏุฏ ูุฐูู.
                  `,
            },
        };

        const emoji = interaction.customId;
        const reply = responses[emoji];

        if (reply) {
            const embed = {
                color: 0x0099ff,
                description: reply.description,
            };

            if (reply.image) {
                embed.image = { url: reply.image };
            }

            embed.description = embed.description.replace(
                /#โใปrules/g,
                "<#992437579939053570>"
            );
            embed.description = embed.description.replace(
                /#๐ใปhelp-center/g,
                "<#1001492505939947520>"
            );
            embed.description = embed.description.replace(
                /#๐ใปrewards-system/g,
                "<#1009210027325784114>"
            );
            embed.description = embed.description.replace(
                /#๐ใปofficial-programs/g,
                "<#1000751488580210708>"
            );
            embed.description = embed.description.replace(
                /#๐ใปtournaments/g,
                "<#1037066255892484227>"
            );
            embed.description = embed.description.replace(
                /#๐คใปintroduction/g,
                "<#993550031967760404>"
            );

            interaction.reply({ embeds: [embed], ephemeral: true });
        }
    }
});